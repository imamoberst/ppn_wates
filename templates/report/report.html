{% extends 'base_home.html' %}
{% block head %}
    <link href="{{ url_for('static',filename='css/bootstrap-datepicker.min.css') }}" rel="stylesheet">

    <style type="text/css">
        td {
            text-align: center;
        }

        th {
            text-align: center;
        }
    </style>
    <script>
        let dataiuransemuanya = '{{ data|tojson|safe }}'
        let tahunreport = '{{ tahunreport }}'
    </script>
{% endblock %}
{% block content %}
    <h1 class="h3 mb-4 text-gray-800">Report</h1>
    <div class="card shadow mb-4 test">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Report Iuran Bulanan</h6>
        </div>
        <div class="card-body">
            <div class="form-row">
                <div class="form-group col-md-2">
                    <select id="blokppn" class="form-control" name="blokppn" required>
                        <option value="">Blok Rumah</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="G">G</option>
                        <option value="H">H</option>
                        <option value="I">I</option>
                        <option value="J">J</option>
                        <option value="K">K</option>
                    </select>
                </div>
                <div class="form-group col-md-2">
                    <input type="text" class="form-control datepickeryear" id="datepickeryear"
                           name="datepickeryear" required>
                </div>
            </div>
            <table class="table table-sm table-bordered table-responsive">
                <thead>
                <tr>
                    <th scope="col">No Rumah</th>
                    <th scope="col">Januari</th>
                    <th scope="col">Febuari</th>
                    <th scope="col">Maret</th>
                    <th scope="col">April</th>
                    <th scope="col">Mei</th>
                    <th scope="col">Juni</th>
                    <th scope="col">Juli</th>
                    <th scope="col">Agustus</th>
                    <th scope="col">September</th>
                    <th scope="col">Oktober</th>
                    <th scope="col">November</th>
                    <th scope="col">Desember</th>
                </tr>
                </thead>
                <tbody>
                {% for d in data %}
                    <tr id="{{ d.norumah }}" class="trIuran">
                        <td>{{ d.norumah }}</td>
                        <td id="januari">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-januari">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="febuari">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-febuari">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="maret">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-maret">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="april">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-april">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="mei">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-mei">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="juni">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-juni">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="juli">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-juli">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="agustus">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-agustus">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="september">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-september">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="oktober">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-oktober">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="november">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-november">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="desember">
                            <a href="#" class="btn btn-sm btn-danger btn-circle iuran-{{ d.norumah }}-desember">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                    </tr>

                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Report Kas Bulanan</h6>
        </div>
        <div class="card-body">
            <div class="form-row">
                <div class="form-group col-md-2">
                    <select id="blokppnkas" class="form-control" name="blokppnkas" required>
                        <option value="">Blok Rumah</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="G">G</option>
                        <option value="H">H</option>
                        <option value="I">I</option>
                        <option value="J">J</option>
                        <option value="K">K</option>
                    </select>
                </div>
                <div class="form-group col-md-2">
                    <input type="text" class="form-control datepickeryearkas" id="datepickeryearkas"
                           name="datepickeryearkas" required>
                </div>
            </div>
            <table class="table table-sm table-bordered table-responsive">
                <thead>
                <tr>
                    <th scope="col">No Rumah</th>
                    <th scope="col">Januari</th>
                    <th scope="col">Febuari</th>
                    <th scope="col">Maret</th>
                    <th scope="col">April</th>
                    <th scope="col">Mei</th>
                    <th scope="col">Juni</th>
                    <th scope="col">Juli</th>
                    <th scope="col">Agustus</th>
                    <th scope="col">September</th>
                    <th scope="col">Oktober</th>
                    <th scope="col">November</th>
                    <th scope="col">Desember</th>
                </tr>
                </thead>
                <tbody>
                {% for d in data %}
                    <tr class="trKas">
                        <td>{{ d.norumah }}</td>
                        <td id="januari">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-januari">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="febuari">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-febuari">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="maret">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-maret">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="april">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-april">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="mei">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-mei">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="juni">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-juni">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="juli">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-juli">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="agustus">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-agustus">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="september">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-september">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="oktober">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-oktober">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="november">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-november">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                        <td id="desember">
                            <a href="#" class="btn btn-sm btn-danger btn-circle kas-{{ d.norumah }}-desember">
                                <i class="fas fa-times"></i>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script type="text/javascript"
            src="{{ url_for('static',filename='js/bootstrap-datepicker.min.js') }}"></script>
    <script type="text/javascript">
        $(function () {
            $(".datepickeryear").datepicker({
                format: " yyyy",
                orientation: 'bottom',
                viewMode: "years",
                minViewMode: "years",
                autoclose: true
            }).on('changeDate', function (ev) {
                tahundata = document.getElementById('datepickeryear').value
                window.location = `${window.origin}/report?tahun=${tahundata.replace(/\s+/g, '')}`
            });
        });
        $(function () {
            $(".datepickeryearkas").datepicker({
                format: " yyyy",
                orientation: 'bottom',
                viewMode: "years",
                minViewMode: "years",
                autoclose: true
            }).on('changeDate', function (ev) {
                tahundata = document.getElementById('datepickeryearkas').value
                window.location = `${window.origin}/report?tahun=${tahundata.replace(/\s+/g, '')}`
            });
        });
    </script>
    <script src="{{ url_for('static',filename='js/report.js') }}"></script>
{% endblock %}